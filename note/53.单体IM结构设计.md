# 53 单体IM架构设计


## 首先是功能模块设计

### 客户端

提供主要的页面以及服务请求，比如登录页面，注册页面，聊天页面，聊天信息查看等

### 服务端

提供客户端的连接，用户注册，登录，聊天和消息转发，消息存储。 数据库： 用户信息，离线消息等



## 工程设计

### common

提供一些基础的服务

### client

用户端的一些功能，比如命令收集模块，处理器模块等

### server

服务端业务处理器，等



## 代码模块

### 命令收集器模块

模拟用户页面，用户端的一些操作都在控制台模拟实现
### 消息构造器模块

基于Porotbuf协议Builder构造消息

<img src="https://oscimg.oschina.net/oscnet/up-5014360a875d2333f6440881da3da0f9c73.png" width=460 height=80>

### 消息发送模块

把封装好的protobuf消息发送和转发

### 消息响应模块

handler处理器等





